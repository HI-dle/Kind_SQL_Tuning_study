# 3.4 ì¸ë±ìŠ¤ ì„¤ê³„
> ì¸ë±ìŠ¤ ì„¤ê³„ì— í•„ìš”í•œ ì—¬ëŸ¬ ê°€ì§€ íŒë‹¨ ê¸°ì¤€, ê³µì‹ì„ ì´ˆì›”í•œ ì „ëžµì  ì„¤ê³„ì˜ í•„ìš”ì„±, ë°©ë²•ë¡  ë“±ì„ ì„¤ëª…

## 3.4.1 ì¸ë±ìŠ¤ ì„¤ê³„ê°€ ì–´ë ¤ìš´ ì´ìœ 
ì¸ë±ìŠ¤ê°€ ë§Žìœ¼ë©´ êµ¬ì²´ì ìœ¼ë¡œ ì•„ëž˜ì™€ ê°™ì€ ë¬¸ì œê°€ ìƒê¸´ë‹¤.
- DML ì„±ëŠ¥ ì €í•˜(-> TPS ì €í•˜)
- ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ì´ì¦ˆ ì¦ê°€(-> ë””ìŠ¤í¬ ê³µê°„ ë‚­ë¹„)
- ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ ë° ìš´ì˜ ë¹„ìš© ìƒìŠ¹

ì˜ˆë¥¼ ë“¤ì–´ ì•„ëž˜ ê·¸ë¦¼ì²˜ëŸ¼ í…Œì´ë¸”ì— ì¸ë±ìŠ¤ê°€ ì„¸ ê°œ ë‹¬ë ¤ ìžˆìœ¼ë©´, ì‹ ê·œ ë°ì´í„°ë¥¼ ìž…ë ¥í•  ë•Œë§ˆë‹¤ ì„¸ ê°œ ì¸ë±ìŠ¤ì—ë„ ë°ì´í„°ë¥¼ ìž…ë ¥í•´ì•¼ í•œë‹¤.

![ê·¸ë¦¼_3-45.png](image%2F%EA%B7%B8%EB%A6%BC_3-45.png)

ì¸ë±ìŠ¤ëŠ” ì •ë ¬ ìƒíƒœë¥¼ ìœ ì§€í•´ì•¼ í•˜ë¯€ë¡œ ìˆ˜ì§ì  íƒìƒ‰ì„ í†µí•´ ìž…ë ¥í•  ë¸”ë¡ë¶€í„° ì°¾ëŠ”ë‹¤. ì°¾ì€ ë¸”ë¡ì— ì—¬ìœ  ê³µê°„ì´ ì—†ìœ¼ë©´ `ì¸ë±ë¸Œ ë¶„í• (index split)`ë„ ë°œìƒí•œë‹¤.

> ðŸ’¡ ì¸ë±ìŠ¤ ë¶„í• 
> 
> ë§Œì•½ 5ë²ˆ ë¸”ë¡ì— ë°ì´í„°ë¥¼ ë„£ì–´ì•¼í•˜ëŠ”ë°, ê³µê°„ì´ ì—†ë‹¤ë©´ `[5ë²ˆ ë¸”ë¡] - [ìƒˆ ë¸”ë¡] - [6ë²ˆ ë¸”ë¡]`ê³¼ ê°™ì´ 5,6ë²ˆ ë¸”ë¡ ì‚¬ì´ì— `ìƒˆ ë¸”ë¡ì„ ë¼ì›Œë„£ëŠ”ë‹¤.`
> 
> ê·¸ë¦¬ê³  [5ë²ˆ ë¸”ë¡]ì— ê³µê°„ì„ ë§Œë“¤ì–´ì¤˜ì•¼í•˜ë¯€ë¡œ `5ë²ˆ ë¸”ë¡ì— ì €ìž¥ëœ ë°ì´í„° ì¤‘ ë’¤ìª½ ì ˆë°˜ì„ ìƒˆ ë¸”ë¡ìœ¼ë¡œ ì˜®ê¸´ë‹¤.`
> 
> ê·¸ë¦¬ê³  `5ë²ˆ ë¸”ë¡ì— ë°ì´í„°ë¥¼ ë„£ëŠ”ë‹¤.`

ë°ì´í„°ë¥¼ ì§€ìš¸ ë•Œë„ ë§ˆì°¬ê°€ì§€ë¡œ, ì„¸ ê°œ ì¸ë±ìŠ¤ì—ì„œ ë ˆì½”ë“œë¥¼ ì¼ì¼ì´ ì°¾ì•„ ì§€ì›Œì¤˜ì•¼ í•œë‹¤.

í•µì‹¬ íŠ¸ëžœì ì…˜ì´ ì°¸ì¡°í•˜ëŠ” í…Œì´ë¸”ì— ëŒ€í•œ `DML ì„±ëŠ¥ ì €í•˜ëŠ” TPS ì €í•˜ë¡œ ì´ì–´ì§„ë‹¤.`

ê¼­ í•„ìš”í•˜ì§€ ì•Šì€ ì¸ë±ìŠ¤ë¥¼ ë§Žì´ ë§Œë“¤ë©´ `ë””ìŠ¤í¬ ê³µê°„ì„ ë‚­ë¹„`í•˜ê³ , `ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ì´ì¦ˆê°€ ì»¤ì§€ëŠ” ë§Œí¼` ë°±ì—…, ë³µì œ ìž¬êµ¬ì„± ë“±ì„ ìœ„í•œ `ìš´ì˜ ë¹„ìš©ë„ ìƒìŠ¹í•œë‹¤.`

> ë”°ë¼ì„œ ê°œë³„ ì¿¼ë¦¬ ì„±ëŠ¥ë¿ë§Œ ì•„ë‹ˆë¼ ì¸ë±ìŠ¤ ê°œìˆ˜ë¥¼ ìµœì†Œí™”í•˜ì—¬ DML ë¶€í•˜ë¥¼ ì¤„ì—¬ì•¼ í•˜ë¯€ë¡œ ì¸ë±ìŠ¤ ì„¤ê³„ê°€ ì–´ë µë‹¤.

---

## ì§„í‡´ì–‘ë‚œ SQL íŠœë‹ - ê°œë°œ ë‹¨ê³„ì—ì„œ ìµœì  ì¸ë±ìŠ¤ ì„¤ê³„ì˜ ì¤‘ìš”ì„±
- ì¸ë±ìŠ¤ ê°œìˆ˜ë¥¼ ìµœì†Œí™”í•˜ë ¤ë©´ ê¸°ì¡´ ì¸ë±ìŠ¤ êµ¬ì„±ì„ ë³€ê²½í•´ì•¼í•œë‹¤.
  - ì‹œìŠ¤í…œ ê°œë°œ ë‹¨ê³„ì—ì„œëŠ” ë¹„êµì  ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìžˆì§€ë§Œ, ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì‰½ì§€ ì•Šë‹¤.
- ê·¸ë‚˜ë§ˆ ì‹ ê·œ ì¸ë±ìŠ¤ ì¶”ê°€ëŠ” ë¹„êµì  ì˜í–¥ë„ê°€ ì ë‹¤.
  - í•˜ì§€ë§Œ, ì¶”ê°€í• ìˆ˜ë¡ ì‹œìŠ¤í…œ ìˆ˜ì¤€ TPSëŠ” ì ì  ë‚˜ë¹ ì§„ë‹¤.

> ì •ë¦¬: `ì¸ë±ìŠ¤ ì¶”ê°€ëŠ” ì‹œìŠ¤í…œì— ë¶€í•˜`ë¥¼ ì£¼ê³ , `ì¸ë±ìŠ¤ ë³€ê²½ì€ ìš´ì˜ ë¦¬ìŠ¤í¬ê°€ í¬ë‹¤.` ë”°ë¼ì„œ ì‹œìŠ¤í…œ ê°œë°œ ë‹¨ê³„ì—ì„œ ì¸ë±ìŠ¤ë¥¼ ìµœì ìœ¼ë¡œ ì„¤ê³„í•˜ëŠ” ì¼ì´ ë¬´ì—‡ë³´ë‹¤ ì¤‘ìš”í•˜ë‹¤.
> 
> íŠ¹ížˆ í•µì‹¬ íŠ¸ëžœìž­ì…˜ì—ì„œ ë°ì´í„°ì˜ ì¶”ê°€, ë³€ê²½, ì‚­ì œê°€ ë°œìƒí•œë‹¤ë©´ SQL íŠœë‹ ì „ë¬¸ê°€ë¥¼ í†µí•´ ì •êµí•˜ê²Œ ì„¤ê³„í•´ì•¼ í•œë‹¤.
> 
> ìžë™í™”ëœ ì¸ë±ìŠ¤ ì„¤ê³„ ë„êµ¬ë„ í•„ìš”í•˜ë‹¤. ì¸ë±ìŠ¤ ì„¤ê³„ë„ë¥¼ ìž‘ì„±í•˜ë ¤ë©´ `ê° í…Œì´ë¸”ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê²½ë¡œë¥¼ ëª¨ë‘ ìˆ˜ì§‘`í•´ì„œ íŒ¨í„´ë³„ë¡œ ì••ì¶•/ì •ë¦¬í•´ì•¼í•˜ëŠ”ë°, ì–‘ì´ ìˆ˜ì‹­ë§Œ ê°œë‚˜ ë˜ê¸° ë•Œë¬¸ì— ì‹œê°„ê³¼ ë…¸ë ¥ì´ ë§Žì´ ë“¤ì–´ê°„ë‹¤.
> 
> ë”°ë¼ì„œ `ì‹œê°„ê³¼ ë…¸ë ¥ì„ ì¤„ì´ê¸° ìœ„í•´ì„œ ìžë™í™” ë„êµ¬ê°€ í•„ìš”í•˜ë‹¤.`

---
## 3.4.2 ê°€ìž¥ ì¤‘ìš”í•œ ë‘ ê°€ì§€ ì„ íƒ ê¸°ì¤€
1. ì¡°ê±´ì ˆì— í•­ìƒ ì‚¬ìš©í•˜ê±°ë‚˜, ìžì£¼ ì‚¬ìš©í•˜ëŠ” ì»¬ëŸ¼ì„ ì„¤ì •í•œë‹¤.
2. `'='` ì¡°ê±´ìœ¼ë¡œ ìžì£¼ ì¡°íšŒí•˜ëŠ” ì»¬ëŸ¼ì„ ì•žìª½ì— ë‘”ë‹¤.

ì¸ë±ìŠ¤ ìŠ¤ìº” ë°©ì‹ ì¤‘ ê°€ìž¥ ì •ìƒì ì´ê³  ì¼ë°˜ì ì¸ ë°©ì‹ì€ `Index Range Scan`ì´ë‹¤.

ì´ë¥¼ ìœ„í•´ì„œëŠ” ì¸ë±ìŠ¤ ì„ ë‘ ì»¬ëŸ¼ì„ ì¡°ê±´ì ˆì— ë°˜ë“œì‹œ ì‚¬ìš©í•´ì•¼í•œë‹¤. ë”°ë¼ì„œ ê²°í•© ì¸ë±ìŠ¤ë¥¼ êµ¬ì„±í•  ë•Œ ì²«ë²ˆì§¸ ê¸°ì¤€ì€ `ì¡°ê±´ì ˆì— í•­ìƒ ì‚¬ìš©í•˜ê±°ë‚˜, ìžì£¼ ì‚¬ìš©í•˜ëŠ” ì»¬ëŸ¼ì„ ì„ ì •í•˜ëŠ” ê²ƒ`ì´ë‹¤.

ë‘ë²ˆì§¸ ê¸°ì¤€ì€, ê·¸ë ‡ê²Œ ì„ ì •í•œ ì»¬ëŸ¼ ì¤‘ `'='` ì¡°ê±´ìœ¼ë¡œ ìžì£¼ ì¡°íšŒí•˜ëŠ” ì»¬ëŸ¼ì„ ì•žìª½ì— ë‘ëŠ” ê²ƒì´ë‹¤.

---
## 3.4.3 ìŠ¤ìº” íš¨ìœ¨ì„± ì´ì™¸ì˜ íŒë‹¨ ê¸°ì¤€
> ë°©ê¸ˆ ë³¸ ë‘ ê°€ì§€ëŠ” `ìŠ¤ìº” íš¨ìœ¨ì„±`ì´ íŒë‹¨ ê¸°ì¤€ì´ì˜€ë‹¤. ë°©ê¸ˆ ë‘ ê°€ì§€ê°€ ì¸ë±ìŠ¤ë¥¼ ì„¤ê³„í•  ë•Œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ ê³µì‹ìž„ì—ëŠ” í‹€ë¦¼ì—†ì§€ë§Œ, ì¸ë±ìŠ¤ ì„¤ê³„ê°€ ê·¸ë¦¬ ê°„ë‹¨í•˜ì§€ë§Œì€ ì•Šë‹¤.

ë”°ë¼ì„œ `ìŠ¤ìº” íš¨ìœ¨ì„±` ì™¸ì— ê³ ë ¤í•´ì•¼ í•  íŒë‹¨ ê¸°ì¤€ì„ ë‚˜ì—´í•˜ë©´ ì•„ëž˜ì™€ ê°™ë‹¤.
- ìˆ˜í–‰ ë¹ˆë„
- ì—…ë¬´ìƒ ì¤‘ìš”ë„
- í´ëŸ¬ìŠ¤í„°ë§ íŒ©í„°
- ë°ì´í„°ëŸ‰
- DML ë¶€í•˜(: ê¸°ì¡´ ì¸ë±ìŠ¤ ê°œìˆ˜, ì´ˆë‹¹ DML ë°œìƒëŸ‰, ìžì£¼ ê°±ì‹ í•˜ëŠ” ì»¬ëŸ¼ í¬í•¨ ì—¬ë¶€ ë“±)
- ì €ìž¥ ê³µê°„
- ì¸ë±ìŠ¤ ê´€ë¦¬ ë¹„ìš© ë“±

> íŒë‹¨ ê¸°ì¤€ì— ëŒ€í•œ í•´ì„ì€ ì„¤ê³„ìžë§ˆë‹¤ ë‹¬ë¼ì„œ ê²°ê³¼ë¬¼ë„ í¬ê²Œ ë‹¬ë¼ì§„ë‹¤.(ì „ìž¥ì—ì„œ ì§€íœ˜ê´€ ìŠ¤íƒ€ì¼ì— ë”°ë¼ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ë“¯)

### 1. ì´ ì¤‘ì—ì„œ `ìˆ˜í–‰ ë¹ˆë„`ëŠ” ê°€ìž¥ ì¤‘ìš”í•œ ê¸°ì¤€ ì¤‘ í•˜ë‚˜ì´ë‹¤.

- ìžì£¼ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ” SQLì´ë¼ë©´ ì¸ë±ìŠ¤ ìŠ¤ìº” ê³¼ì •ì— ë¹„íš¨ìœ¨ì´ ìžˆë”ë¼ë„ í° ë¬¸ì œê°€ ì•„ë‹ ìˆ˜ ìžˆë‹¤.
- ë°˜ë©´, ìˆ˜í–‰ë¹ˆë„ê°€ ë§¤ìš° ë†’ì€ SQLì—ëŠ” ìµœì ì˜ ì¸ë±ìŠ¤ë¥¼ êµ¬ì„±í•´ì¤˜ì•¼ í•œë‹¤.
- `ìˆ˜í–‰ ë¹ˆë„`ì™€ ê´€ë ¨í•´, `NL ì¡°ì¸`í•  ë•Œ ì–´ëŠ ìª½ì—ì„œ ìžì£¼ ì•¡ì„¸ìŠ¤ ë˜ëŠ”ì§€ë„ ì¤‘ìš”í•œ íŒë‹¨ ê¸°ì¤€ì´ ëœë‹¤.

> ì•„ëž˜ ê·¸ë¦¼ì²˜ëŸ¼ `NL ë°©ì‹`ìœ¼ë¡œ ì¡°ì¸í•˜ëŠ” ë‘ í…Œì´ë¸”ì´ ìžˆì„ ë•Œ, 1ë²ˆê³¼ 2ë²ˆ ì¤‘ ì–´ëŠ ìª½ ì¸ë±ìŠ¤ê°€ ë” ì¤‘ìš”í• ê¹Œ?
![ê·¸ë¦¼_3-46.png](image%2F%EA%B7%B8%EB%A6%BC_3-46.png)
> ì–´ëŠ ìª½ ì¸ë±ìŠ¤ê°€ ë” ì¤‘ìš”í•œì§€ íŒë³„í•˜ê¸° ìœ„í•´, ìš°ë¦¬ëŠ” ì•„ëž˜ì™€ ê°™ì´ ë¹„êµí•  ê²ƒì´ë‹¤.
> 
> - Outer í…Œì´ë¸”ì˜ ì¸ë±ìŠ¤ê°€ ë¹„íš¨ìœ¨ì 
> - Inner í…Œì´ë¸”ì˜ ì¸ë±ìŠ¤ê°€ ë¹„íš¨ìœ¨ì 
>   - ë‘˜ ì¤‘ì— ë­ê°€ ë” ì¹˜ëª…ì ì¸ê°€?

```java
// ðŸ’¡ ìž ê¹ ì§šê³ ê°€ê¸°: NL ì¡°ì¸ ë©”ì»¤ë‹ˆì¦˜
for each outerRow in OUTER_TABLE {
    for each innerRow in INNER_TABLE where ì¡°ê±´(innerRow, outerRow) {
        output(joinResult)
    }
}
// ë°”ê¹¥ ë°˜ë³µë¬¸ì˜ ëŒ€ìƒì´ Outer í…Œì´ë¸”
// ì•ˆìª½ ë°˜ë³µë¬¸ì˜ ëŒ€ìƒì€ Inner í…Œì´ë¸”
// ì¦‰, Outer í…Œì´ë¸”ì—ì„œ ë ˆì½”ë“œë¥¼ ë¨¼ì € ë„ì¶œí•œë‹¤ìŒ, ê° ë ˆì½”ë“œì— ëŒ€í•´ Inner í…Œì´ë¸”ì—ì„œ ì¡°ê±´ì— ë§žëŠ” ë ˆì½”ë“œë¥¼ ì°¾ëŠ”ë‹¤.
```

ì˜ˆì‹œë¡œ ì•„ëž˜ ì¿¼ë¦¬ë¥¼ ë³´ê² ë‹¤. ì¸ë±ìŠ¤ëŠ” `[ê±°ëž˜ì¼ìž + ê±°ëž˜êµ¬ë¶„ì½”ë“œ]`ì´ë‹¤.
```sql
SELECT /*+ leading(a) use_nl(b) (ê±°ëž˜ê°€ Outer í…Œì´ë¸”, ìƒí’ˆì´ Inner í…Œì´ë¸”) */ 
       b.ìƒí’ˆì½”ë“œ, b.ìƒí’ˆëª…,
       a.ê³ ê°ë²ˆí˜¸, a.ê±°ëž˜ì¼ìž, a.ê±°ëž˜ëŸ‰, a.ê±°ëž˜ê¸ˆì•¡
FROM ê±°ëž˜ a, ìƒí’ˆ b
WHERE a.ê±°ëž˜êµ¬ë¶„ì½”ë“œ = 'AC'
  AND a.ê±°ëž˜ì¼ìž BETWEEN '20090101' AND '20090131'
  AND b.ìƒí’ˆë²ˆí˜¸ = a.ìƒí’ˆë²ˆí˜¸
  AND b.ìƒí’ˆë²ˆí˜¸ = 'ê°€ì „'
```

> ðŸ’¡ ê±°ëž˜(a)ê°€ Outer, ìƒí’ˆ(b)ì´ Inner
>
> : ê±°ëž˜(a)ë¥¼ ë¨¼ì € ì½ì–´ì„œ ì¡°ê±´ì— ë§žëŠ” ë ˆì½”ë“œë¥¼ ì°¾ê³ , ê±°ëž˜(a)ì˜ ìƒí’ˆë²ˆí˜¸ë¡œ ìƒí’ˆ(b)ë¥¼ ì°¾ëŠ” NL ì¡°ì¸ ìˆ˜í–‰ 
> 
> ðŸ’¡ ì¸ë±ìŠ¤ê°€ [ê±°ëž˜ì¼ìž + ê±°ëž˜êµ¬ë¶„ì½”ë“œ]
> 
> : ì¸ë±ìŠ¤ë¥¼ [ê±°ëž˜êµ¬ë¶„ì½”ë“œ + ê±°ëž˜ì¼ìž]ë¡œ ê²°ì •í–ˆì„ ë•Œë³´ë‹¤ ë¹„íš¨ìœ¨ì ì´ë‹¤. `a.ê±°ëž˜êµ¬ë¶„ì½”ë“œ = 'AC'`ë¡œ ë¨¼ì € ë“±ê°€ ì¡°ê±´ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì¤„ì¼ ìˆ˜ ìžˆê¸° ë•Œë¬¸

ì´ì œ ì§€ê¸ˆ ìƒí™©ì„ `NL ì¡°ì¸`ê´€ì ì—ì„œ ë³´ìžë©´, `Outer í…Œì´ë¸”ì—ì„œì˜ ì¸ë±ìŠ¤ ë¹„íš¨ìœ¨ì€ í° ë¬¸ì œê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤.` ë¹„íš¨ìœ¨ì´ ìžˆë”ë¼ë„, `ê·¸ ê³¼ì •ì„ 1ë²ˆë§Œ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì´ë‹¤.`

ë°˜ë©´ì— ì•„ëž˜ì™€ ê°™ì´, Inner í…Œì´ë¸”ì˜ ì¸ë±ìŠ¤ê°€ `[ê±°ëž˜ì¼ìž + ìƒí’ˆë²ˆí˜¸ + ê±°ëž˜êµ¬ë¶„ì½”ë“œ]`ë¡œ ë¹„íš¨ìœ¨ì´ ì¡´ìž¬í•œë‹¤ë©´?
```sql
SELECT /** leadling(b) use_nl(a) */
b.ìƒí’ˆì½”ë“œ, b.ìƒí’ˆëª…, a.ê³ ê°ë²ˆí˜¸, a.ê±°ëž˜ì¼ìž, a.ê±°ëž˜ëŸ‰, a.ê±°ëž˜ê¸ˆì•¡
FROM ê±°ëž˜ a, ìƒí’ˆ b
WHERE a.ê±°ëž˜êµ¬ë¶„ì½”ë“œ = â€˜ACâ€™
AND a.ê±°ëž˜ì¼ìž BETWEEN â€˜20090101â€™ AND â€˜20090131â€™
AND b.ìƒí’ˆë²ˆí˜¸ = a.ìƒí’ˆë²ˆí˜¸
AND b.ìƒí’ˆë²ˆí˜¸ = â€˜ê°€ì „â€™
```

Outerì˜ ê±´ìˆ˜ë§Œí¼ Inner í…Œì´ë¸”ì„ ì ‘ê·¼í•´ì•¼í•˜ëŠ”ë°, ì ‘ê·¼ë§ˆë‹¤ ë¹„íš¨ìœ¨ì„ ë°˜ë³µí•˜ê²Œ ë˜ë¯€ë¡œ ì¹˜ëª…ì ì´ë‹¤.

> ì •ë¦¬: Inner ìª½ ì¸ë±ìŠ¤ê°€ ë§¤ìš° ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì—, Inner ìª½ ì¸ë±ìŠ¤ëŠ” `'='` ì¡°ê±´ ì»¬ëŸ¼ì„ ì„ ë‘ì— ë‘ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ê³ , ë  ìˆ˜ ìžˆìœ¼ë©´ í…Œì´ë¸” ì•¡ì„¸ìŠ¤ ì—†ì´ ì¸ë±ìŠ¤ì—ì„œ í•„í„°ë§ì„ ë§ˆì¹˜ë„ë¡ êµ¬ì„±í•´ì•¼í•œë‹¤.

---
### 2. `ë°ì´í„°ëŸ‰`ë„ ì¸ë±ìŠ¤ë¥¼ ì„¤ê³„í•  ë•Œ ì¤‘ìš”í•œ íŒë‹¨ ê¸°ì¤€ì´ë‹¤.
- ë°ì´í„°ëŸ‰ì´ ì ë‹¤ë©´ êµ³ì´ ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ í•„ìš”ê°€ ì—†ë‹¤.
  - í’€ìŠ¤ìº”ë„ ì¶©ë¶„ížˆ ë¹ ë¥´ê¸° ë•Œë¬¸
  - ë°˜ëŒ€ë¡œ, ì¸ë±ìŠ¤ë¥¼ ë§Žì´ ë§Œë“ ë‹¤í•´ë„ ì €ìž¥ ê³µê°„ì´ë‚˜ íŠ¸ëžœìž­ì…˜ ë¶€í•˜ ì¸¡ë©´ì—ì„œ ê·¸ë‹¤ì§€ ë¬¸ì œë  ê²ƒì´ ì—†ë‹¤.
    - : í…Œì´ë¸”ì´ ìž‘ë‹¤ë©´ ì‹¬ê°í•˜ê²Œ ê³ ë¯¼í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
- ì´ˆëŒ€ìš©ëŸ‰ í…Œì´ë¸”ì´ë¼ë©´?
  - Insertë„ ë§Žì„ ê²ƒ -> DML ë°œìƒëŸ‰ì€ TPSì— ì˜í–¥ì„ ì¤€ë‹¤.
  - ì¸ë±ìŠ¤ë¥¼ ì„¤ê³„í•  ë•Œ ì „ë¬¸ê°€ì˜ ì†ê¸¸ì´ í•„ìš”í•˜ë‹¤.

---
## 3.4.4 ê³µì‹ì„ ì´ˆì›”í•œ ì „ëžµì  ì„¤ê³„
- ì¡°ê±´ì ˆ íŒ¨í„´ì´ ì—¬ëŸ¬ê°œ ìžˆì„ ë•Œ, íŒ¨í„´ë§ˆë‹¤ ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ëŠ” ì—†ë‹¤.
- ê°€ìž¥ í•µì‹¬ì ì¸ ì•¡ì„¸ìŠ¤ `ê²½ë¡œ í•œë‘ ê°œë¥¼ ì„ íƒí•´ì„œ ìµœì  ì¸ë±ìŠ¤ë¥¼ ì„¤ê³„í•˜ê³ ,`
- ë‚˜ë¨¸ì§€ ì•¡ì„¸ìŠ¤ ê²½ë¡œëŠ” `ì•½ê°„ì˜ ë¹„íš¨ìœ¨ì´ ìžˆë”ë¼ë„ ëª©í‘œ ì„±ëŠ¥ì„ ë§Œì¡±í•˜ëŠ” ìˆ˜ì¤€ìœ¼ë¡œ ì¸ë±ìŠ¤ë¥¼ êµ¬ì„±í•  ìˆ˜ ìžˆì–´ì•¼í•œë‹¤.`

> ì•„ëž˜ëŠ” ì˜ˆì‹ ë° í¬ê²Œ ì¤‘ìš”í•˜ì§„ ì•Šì€ ê²ƒ ê°™ë‹¤.
> 
> ![ê·¸ë¦¼_3-47.png](image%2F%EA%B7%B8%EB%A6%BC_3-47.png)
> ì•ž ì„ íƒì€ `'='` ì¡°ê±´ì ˆì´ê³ , ë’¤ ì„ íƒì€ `BETWEEN` ì—°ì‚°ìžë¥¼ ì‚¬ìš©í•œë‹¤.

ì¸ë±ìŠ¤ ìŠ¤ìº” íš¨ìœ¨ì„ ìœ„í•´ `24ê°œì˜ ì¸ë±ìŠ¤ íŒ¨í„´ì„ ëª¨ë‘ ìƒì„±í•  ìˆ˜ëŠ” ì—†ë‹¤.`

`ì¼ìž/ì¼ì‹œ ì¡°ê±´ì„ ì„ ë‘ì— ë‘ê³ , ìžì£¼ ì‚¬ìš©í•˜ëŠ” í•„í„° ì¡°ê±´ì„ ëª¨ë‘ ë’¤ìª½ì— ì¶”ê°€í•˜ëŠ” ë°©ì‹`ìœ¼ë¡œ ì„¤ê³„í•´ë³´ìž.

- `X01`: ì²­ì•½ì¼ìž + ì·¨ê¸‰ë¶€ì„œ + ì·¨ê¸‰ì§€ì  + ì·¨ê¸‰ìž + ìž…ë ¥ìž + ëŒ€ë¦¬ì ì„¤ê³„ì‚¬ + ëŒ€ë¦¬ì ì§€ì‚¬
- `X02`: ë³´í—˜ê°œì‹œì¼ìž + ì·¨ê¸‰ë¶€ì„œ + ì·¨ê¸‰ì§€ì  + ì·¨ê¸‰ìž + ìž…ë ¥ìž + ëŒ€ë¦¬ì ì„¤ê³„ì‚¬ + ëŒ€ë¦¬ì ì§€ì‚¬
- `X03`: ë³´í—˜ì¢…ë£Œì¼ìž + ì·¨ê¸‰ë¶€ì„œ + ì·¨ê¸‰ì§€ì  + ì·¨ê¸‰ìž + ìž…ë ¥ìž + ëŒ€ë¦¬ì ì„¤ê³„ì‚¬ + ëŒ€ë¦¬ì ì§€ì‚¬
- `X04`: ë°ì´í„°ìƒì„±ì¼ì‹œ + ì·¨ê¸‰ë¶€ì„œ + ì·¨ê¸‰ì§€ì  + ì·¨ê¸‰ìž + ëŒ€ë¦¬ì ì„¤ê³„ì‚¬ + ëŒ€ë¦¬ì ì§€ì‚¬

ì„¤ê³„ ì´ìœ ëŠ” ì•„ëž˜ì™€ ê°™ë‹¤.
- `ê°€ê³„ì•½`ì€ ì£¼ë¡œ 3ì¼ ì´ë‚´ ë°ì´í„°ë¥¼ ì¡°íšŒí•œë‹¤. ì–´ì©Œë‹¤ í•œ ë‹¬ ì¹˜ë¥¼ ì¡°íšŒí•´ë„ ì‚¬ìš©ìžê°€ ì¸ë‚´í•  ìˆ˜ ìžˆëŠ” ìˆ˜ì¤€ì´ë‹¤.
- ì¸ë±ìŠ¤ ìŠ¤ìº” íš¨ìœ¨ë³´ë‹¤ í…Œì´ë¸” ì•¡ì„¸ìŠ¤ê°€ ë” í° ë¶€í•˜ìš”ì†Œì´ê¸° ë•Œë¬¸

ë¬¼ë¡ , `BETWEEN ì¡°ê±´ ì—°ì‚°ìž`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¼ìž/ì¼ì‹œê°€ ì„ ë‘ì»¬ëŸ¼ì¸ ì ì´ ì°ì°í•˜ë‹¤. í•˜ì§€ë§Œ ì´ ë˜í•œ ì´ìœ ê°€ ìžˆë‹¤.

`ê°€ê³„ì•½` í…Œì´ë¸”ì—ì„œ ê°€ìž¥ ë§Žì´ ì‚¬ìš©í•˜ëŠ” ì¸ë±ìŠ¤ íŒ¨í„´ì´ `[ìž…ë ¥ìž + ë°ì´í„°ìƒì„±ì¼ì‹œ]` ì´ì—ˆê¸° ë•Œë¬¸ì´ë¼ê³ í•œë‹¤.

ë”°ë¼ì„œ ì•„ëž˜ì™€ ê°™ì€ ì¸ë±ìŠ¤ë¥¼ ë” ì¶”ê°€í•´ì£¼ì—ˆë‹¤ê³  í•œë‹¤.
- `X05`: ìž…ë ¥ìž + ë°ì´í„°ìƒì„±ì¼ì‹œ

> ê²°ë¡ : 
> 
> ê³µì‹ëŒ€ë¡œ í•œë‹¤ë©´ 24ê°œì˜ ì¸ë±ìŠ¤ê°€ í•„ìš”í–ˆê² ì§€ë§Œ, ì—…ë¬´ ìƒí™©ì„ ê³ ë ¤í•œ ì „ëžµì  íŒë‹¨ì„ í†µí•´ ì¸ë±ìŠ¤ë¥¼ 5ê°œë¡œ ì¤„ì˜€ë‹¤.
> 
> ì´ë ‡ê²Œ ì¸ë±ìŠ¤ ê°œìˆ˜ë¥¼ ìµœì†Œí™”í•˜ë©´, ì‚¬ìš©ë¹ˆë„ê°€ ë†’ê±°ë‚˜ ì¤‘ìš”í•œ ì•¡ì„¸ìŠ¤ ê²½ë¡œê°€ ìƒˆë¡œ ë„ì¶œëì„ ë•Œ ì¸ë±ìŠ¤ë¥¼ ì¶”ê°€í•  ì—¬ìœ ë„ ìƒê¸´ë‹¤.

---
## 3.4.5 ì†ŒíŠ¸ ì—°ì‚°ì„ ìƒëžµí•˜ê¸° ìœ„í•œ ì»¬ëŸ¼ ì¶”ê°€
- ì¸ë±ìŠ¤ëŠ” í•­ìƒ ì •ë ¬ ìƒíƒœì´ë¯€ë¡œ `ORDER BY`, `GROUP BY`ë¥¼ ìœ„í•œ ì†ŒíŠ¸ ì—°ì‚°ì„ ìƒëžµí•  ìˆ˜ ìžˆê²Œ í•´ ì¤€ë‹¤.
- ë”°ë¼ì„œ ì¡°ê±´ì ˆì— ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»¬ëŸ¼ì´ë¼ë„ `ì†ŒíŠ¸ ì—°ì‚°ì„ ìƒëžµí•  ëª©ì `ìœ¼ë¡œ ì¸ë±ìŠ¤ êµ¬ì„±ì— í¬í•¨ì‹œí‚´ìœ¼ë¡œì¨ ì„±ëŠ¥ ê°œì„ ì„ ë„ëª¨í•  ìˆ˜ ìžˆë‹¤.

```sql
select ê³„ì•½ID, ì²­ì•½ì¼ìž, ìž…ë ¥ìžID, ê³„ì•½ìƒíƒœì½”ë“œ, ë³´í—˜ì‹œìž‘ì¼ìž, ë³´í—˜ì¢…ë£Œì¼ìž
from ê³„ì•½
where ì·¨ê¸‰ì§€ì ID = :trt_brch_id
and ì²­ì•½ì¼ìž between :sbcp_dt1 and :sbcp_dt2
and ìž…ë ¥ì¼ìž >= trunc(sysdate - 3)
and ê³„ì•½ìƒíƒœì½”ë“œ in ( :ctr_stat_cd1, :ctr_stat_cd2, :ctr_stat_cd3 )
order by ì²­ì•½ì¼ìž, ìž…ë ¥ìžID
```
- ìœ„ ì¿¼ë¦¬ì—ì„œ ì†ŒíŠ¸ ì—°ì‚°ì„ ìƒëžµí•˜ë ¤ë©´ ì¸ë±ìŠ¤ë¥¼ order by ì ˆ ìˆœì„œëŒ€ë¡œ `[ì²­ì•½ì¼ìž + ìž…ë ¥ìžID]`ë¡œ êµ¬ì„±í•˜ë©´ ëœë‹¤.
- `'='` ì¡°ê±´ì ˆ ì»¬ëŸ¼ì€ order by ì ˆì— ì—†ë”ë¼ë„ ì¸ë±ìŠ¤ì— í¬í•¨í•  ìˆ˜ ìžˆë‹¤.(ìœ„ì¹˜ëŠ” ìƒê´€ì—†ë‹¤.)
  - `'='` ì´ ì•„ë‹Œ ì¡°ê±´ì ˆ ì»¬ëŸ¼ë“¤ì€ ë°˜ë“œì‹œ order by ì»¬ëŸ¼ë³´ë‹¤ ë’¤ìª½ì— ë‘ì–´ì•¼ ì†ŒíŠ¸ ì—°ì‚°ì„ ìƒëžµí•  ìˆ˜ ìžˆë‹¤.(e.g [ì²­ì•½ì¼ìž + ìž…ë ¥ìžID + ìž…ë ¥ì¼ìž + ê³„ì•½ìƒíƒœì½”ë“œ])

ì´ë ‡ê²Œ í•˜ë©´ ì†ŒíŠ¸ì—°ì‚°ì€ ìƒëžµí•  ìˆ˜ ìžˆì§€ë§Œ, ìˆ˜í‰ íƒìƒ‰ ì¤‘ì— ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë¥¼ ëŠ¦ê²Œ ë§Œë‚œë‹¤ë©´ `I/O`ê°€ ë§Žì´ ë°œìƒí•˜ê²Œ ëœë‹¤.

`I/O`ë¥¼ ìµœì†Œí™”í•˜ë©´ì„œë„ ì†ŒíŠ¸ ì—°ì‚°ì„ ìƒëžµí•˜ë ¤ë©´ ì•„ëž˜ ê³µì‹ì„ ë”°ë¥´ë©´ ëœë‹¤.
- `'='` ì—°ì‚°ìžë¡œ ì‚¬ìš©í•œ ì¡°ê±´ì ˆ ì»¬ëŸ¼ ì„ ì •
- `ORDER BY ì ˆ`ì— ê¸°ìˆ í•œ ì»¬ëŸ¼ ì¶”ê°€
- `'='` ì´ ì•„ë‹Œ ì¡°ê±´ì ˆ ì»¬ëŸ¼ì€ ë°ì´í„° ë¶„í¬ë¥¼ ê³ ë ¤í•´ ì¶”ê°€ ì—¬ë¶€ ê²°ì •

> ë”°ë¼ì„œ `[ì·¨ê¸‰ì§€ì ID + ì²­ì•½ì¼ìž + ìž…ë ¥ìžID]` ìˆœìœ¼ë¡œ êµ¬ì„±.
> 
> ìž…ë ¥ì¼ìžì™€ ê³„ì•½ìƒíƒœì½”ë“œëŠ” ë¶™ì´ê±°ë‚˜ ë§ê±°ë‚˜ë‹¤.(ë°ì´í„°ê°€ ì ë‹¤ë©´ ë¶™ì´ëŠ”ê²Œ í…Œì´ë¸” ëžœë¤ ì•¡ì„¸ìŠ¤ë¥¼ ì¤„ì¼ ìˆ˜ ìžˆë‹¤.)

### IN ì¡°ê±´ì€ `'='`ì´ ì•„ë‹ˆë‹¤.

```sql
select ê³ ê°ë²ˆí˜¸, ê³ ê°ëª…, ê±°ì£¼ì§€ì—­, í˜ˆì•¡í˜•, ì—°ë ¹
from ê³ ê°
where ê±°ì£¼ì§€ì—­ = 'ì„œìš¸'
and í˜ˆì•¡í˜• in ( 'A', 'O' )
order by ì—°ë ¹
```

ìœ„ì—ì„œ `'='` ì¡°ê±´ì ˆ ì»¬ëŸ¼ì€ ì¸ë±ìŠ¤ ì•žìª½ì— ë‘ì–´ë„ ì†ŒíŠ¸ì—°ì‚°ì„ ìƒëžµí•  ìˆ˜ ìžˆë‹¤ê³  í–ˆë‹¤.

ê²°ë¡ ë¶€í„° ë§í•˜ë©´ `IN ì ˆì€ '=' ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì¸ë±ìŠ¤ ì•žìª½ì— ë‘ì–´ë„ ì†ŒíŠ¸ì—°ì‚°ì„ ìƒëžµí•  ìˆ˜ ì—†ë‹¤.`

ì˜ˆì‹œë¥¼ ë³´ìž. ì¸ë±ìŠ¤ëŠ” ì•„ëž˜ í‘œì²˜ëŸ¼ `[ê±°ì£¼ì§€ì—­ + í˜ˆì•¡í˜• + ì—°ë ¹]` ìˆœìœ¼ë¡œ êµ¬ì„±í–ˆë‹¤.

![í‘œ_3-3.png](image%2F%ED%91%9C_3-3.png)

ë§Œì•½ `IN ì ˆì´ '='ë¡œ ë™ìž‘í•œë‹¤ë©´` ìœ„ ì¿¼ë¦¬ê°€ ì•„ëž˜ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ì•¼í•œë‹¤.

```sql
select ê³ ê°ë²ˆí˜¸, ê³ ê°ëª…, ê±°ì£¼ì§€ì—­, í˜ˆì•¡í˜•, ì—°ë ¹
from ê³ ê°
where ê±°ì£¼ì§€ì—­ = 'ì„œìš¸'
and í˜ˆì•¡í˜• = 'A'

union all /* Aí˜• ì¡°íšŒ + Oí˜• ì¡°íšŒ */

select ê³ ê°ë²ˆí˜¸, ê³ ê°ëª…, ê±°ì£¼ì§€ì—­, í˜ˆì•¡í˜•, ì—°ë ¹
from ê³ ê°
where ê±°ì£¼ì§€ì—­ = 'ì„œìš¸'
and í˜ˆì•¡í˜• = 'O'

order by ì—°ë ¹
```

ìš°ë¦¬ì˜ ëª©ì ì²˜ëŸ¼ `order by ì ˆì´ ìžˆìŒì—ë„ ì†ŒíŠ¸ ì—°ì‚°ì´ ìƒëžµë˜ë ¤ë©´` A + Oì˜ ê²°ê³¼ê°€ ì—°ë ¹ìˆœìœ¼ë¡œ ì •ë ¬ë¼ì•¼í•œë‹¤.

í•˜ì§€ë§Œ ê·¸ê²ƒì´ ê°€ëŠ¥í•˜ë ¤ë©´ ì„œìš¸ì— ì‚¬ëŠ” ëª¨ë“  Aí˜•ì´ Oí˜•ë³´ë‹¤ ë‚˜ì´ê°€ ì ì–´ì•¼í•œë‹¤. `ì¦‰, ë¶ˆê°€ëŠ¥ !!`

> ê²°ë¡ :
> 
> `IN ì ˆ`ì´ `'='` ë¡œ ë™ìž‘ë˜ì–´ì„œëŠ” ì†ŒíŠ¸ ì—°ì‚°ì„ ìƒëžµí•  ìˆ˜ ì—†ë‹¤.
> 
> -> ì†ŒíŠ¸ ì—°ì‚°ì„ ìƒëžµí•˜ê¸° ìœ„í•´ì„œëŠ” `IN ì ˆ`ì„ `ì¸ë±ìŠ¤ ì•¡ì„¸ìŠ¤ ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.`
> 
> -> ì†ŒíŠ¸ ì—°ì‚°ì„ ìƒëžµí•˜ê¸° ìœ„í•´ì„œëŠ” `IN ì ˆ`ì€ `í•„í„° ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼í•œë‹¤.` 
> 
> (e.g `[ê±°ì£¼ì§€ì—­ + ì—°ë ¹ + í˜ˆì•¡í˜•]`)